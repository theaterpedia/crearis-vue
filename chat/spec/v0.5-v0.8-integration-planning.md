# Crearis System Integration Report: v0.5-v0.8 Planning
**Date:** December 8, 2025  
**Author:** Claude (Opus 4.5)  
**Status:** Strategic Planning Document

---

## Executive Summary

This report documents the integration strategy between **Crearis-Vue** (simplified practitioner UI), **Crearis-Odoo** (business logic & data backend), and **Crearis-Nuxt** (future standalone websites). It outlines phases v0.5 through v0.8 and the role of MCP and GraphQL in enabling efficient AI-assisted development.

---

## 1. The Crearis Ecosystem

### 1.1 Three-System Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         CREARIS ECOSYSTEM                                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                              ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ                     CREARIS-ODOO (Backend)                             ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                                                        ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Odoo 16 Community Edition (upgradeable to 18)                       ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Multi-company setup with domaincode-indexed websites                ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Custom extensions:                                                  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ    - domainuser table (user ‚Üî website relations + roles)               ‚îÇ ‚îÇ
‚îÇ  ‚îÇ    - md fields on all entities (Markdown support)                      ‚îÇ ‚îÇ
‚îÇ  ‚îÇ    - Heading/Hero component configuration                              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ    - Extended events module (beyond "selling conferences")             ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ GraphQL API with xmlid-based everything                             ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Workitems/activities system (untouched, ready to integrate)         ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                                                        ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                     ‚îÇ                                        ‚îÇ
‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                       ‚îÇ
‚îÇ                    ‚îÇ                ‚îÇ                ‚îÇ                       ‚îÇ
‚îÇ                    ‚ñº                ‚ñº                ‚ñº                       ‚îÇ
‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê           ‚îÇ
‚îÇ         ‚îÇ   MCP Server    ‚îÇ  ‚îÇ  GraphQL    ‚îÇ  ‚îÇ  JSON-RPC       ‚îÇ           ‚îÇ
‚îÇ         ‚îÇ   (new option)  ‚îÇ  ‚îÇ  (existing) ‚îÇ  ‚îÇ  (standard)     ‚îÇ           ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò           ‚îÇ
‚îÇ                  ‚îÇ                  ‚îÇ                  ‚îÇ                     ‚îÇ
‚îÇ                  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                     ‚îÇ
‚îÇ                                     ‚îÇ                                        ‚îÇ
‚îÇ                                     ‚ñº                                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ                     CREARIS-VUE (Current Focus)                        ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                                                        ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Simplified practitioner UI (tablet-optimized, onboarding-first)     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Sandboxed Odoo functionality                                        ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ /sites/[domaincode] preview routes                                  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Nitro backend + Vue frontend                                        ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ PostgreSQL (simplified Odoo schema cache)                           ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ sysreg_config capabilities system                                   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                                                        ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  Integration points:                                                   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ nitro-graphql ‚Üí Crearis-Odoo GraphQL                               ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ workitems table ‚Üí Odoo activities sync                              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ projects table ‚Üí Odoo companies/websites                            ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                                                        ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                     ‚îÇ                                        ‚îÇ
‚îÇ                                     ‚ñº (v1.0, April 2026)                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ                     CREARIS-NUXT (Future)                              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                                                        ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Standalone websites with real domains                               ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ utopia-in-action.de, other-domain.org                               ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Deep Odoo integration (payments, etc.)                              ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Components inherited from Crearis-Vue                               ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  ‚Ä¢ Single-company perspective                                          ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                                                        ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 1.2 Key Design Principles

1. **Odoo is the source of truth** for business logic and complex workflows
2. **Crearis-Vue simplifies** what Odoo is capable of (sandboxing)
3. **Multi-Odoo future:** Multiple Odoo instances ‚Üí single Vue experience
4. **Domaincode-based indexing** unifies everything
5. **Don't duplicate Odoo functionality** - integrate, don't replicate

---

## 2. AI-Assisted Development: MCP + GraphQL

### 2.1 Two Interface Options

| Interface | MCP Server | GraphQL |
|-----------|------------|---------|
| **Tool** | tuanle96/mcp-odoo or ivnvxd/mcp-server-odoo | Existing Crearis-Odoo GraphQL |
| **Protocol** | XML-RPC / JSON-RPC | GraphQL over HTTP |
| **Version-dependent** | Somewhat (Odoo API changes) | No (abstracted) |
| **Already implemented** | No (needs setup) | Yes (running) |
| **Claude access** | Via MCP config | Via fetch_webpage or custom MCP |
| **Workitems support** | Yes (any Odoo model) | Not yet (needs schema extension) |
| **Typed** | No | Yes (instant typing, descriptions) |
| **xmlid-based** | Manual | Built-in |
| **domaincode filtering** | Manual | Built-in |

### 2.2 Recommended Strategy

**Phase 1 (Now - v0.4):** Set up MCP for Odoo exploration
- Quick access to any Odoo model for spec work
- Test data creation/verification
- Schema discovery

**Phase 2 (v0.5):** Extend GraphQL for workitems
- Add `mail.activity`, `project.task` to GraphQL schema
- Use GraphQL for production sync
- MCP for debugging/testing

**Phase 3 (v0.6+):** GraphQL as primary interface
- All sync through GraphQL
- MCP only for development/testing
- Version-independent integration

### 2.3 nitro-graphql Integration

The `nitro-graphql` package is ideal for Crearis-Vue:

```typescript
// server/graphql/odoo/schema.graphql
type OdooPartner {
  id: ID!
  xmlid: String!
  name: String!
  email: String
  domaincode: String
}

type OdooActivity {
  id: ID!
  xmlid: String!
  summary: String
  activityTypeId: Int
  dateDeadline: String
  userId: Int
}

extend type Query {
  odooPartners(domaincode: String): [OdooPartner!]!
  odooActivities(domaincode: String): [OdooActivity!]!
}

// server/graphql/odoo/odoo.resolver.ts
import { defineQuery } from 'nitro-graphql/define'

export const odooQueries = defineQuery({
  odooPartners: async (_, { domaincode }, ctx) => {
    // Proxy to Crearis-Odoo GraphQL
    const result = await $fetch('https://odoo.crearis.org/graphql', {
      method: 'POST',
      body: { query: PARTNERS_QUERY, variables: { domaincode } }
    })
    return result.data.partners
  }
})
```

**Benefits:**
- Type generation for Vue components
- Unified GraphQL layer (Vue ‚Üî Odoo)
- Auto-discovery of schemas
- Apollo Sandbox for testing

### 2.4 Claude-to-Claude Report Transport

With MCP enabled on both systems:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Claude @ Vue    ‚îÇ                    ‚îÇ Claude @ Odoo   ‚îÇ
‚îÇ (this session)  ‚îÇ                    ‚îÇ (other session) ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§                    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                 ‚îÇ                    ‚îÇ                 ‚îÇ
‚îÇ  1. Create      ‚îÇ   ‚îÄ‚îÄ(report)‚îÄ‚îÄ‚ñ∂    ‚îÇ  2. Read        ‚îÇ
‚îÇ     spec.md     ‚îÇ                    ‚îÇ     spec.md     ‚îÇ
‚îÇ                 ‚îÇ                    ‚îÇ                 ‚îÇ
‚îÇ  3. Query       ‚îÇ   ‚óÄ‚îÄ‚îÄ(MCP)‚îÄ‚îÄ‚îÄ‚îÄ     ‚îÇ  4. Create      ‚îÇ
‚îÇ     results     ‚îÇ                    ‚îÇ     test data   ‚îÇ
‚îÇ                 ‚îÇ                    ‚îÇ                 ‚îÇ
‚îÇ  5. Verify      ‚îÇ   ‚îÄ‚îÄ(MCP)‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂     ‚îÇ  6. Check       ‚îÇ
‚îÇ     sync        ‚îÇ                    ‚îÇ     Odoo state  ‚îÇ
‚îÇ                 ‚îÇ                    ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

Reports in `chat/spec/` serve as handoff documents between Claude sessions.

---

## 3. Version Roadmap: v0.5 - v0.8

### 3.1 Overview Timeline

```
DEC 2025          JAN 2026                    FEB 2026
‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ
    ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
 v0.4          v0.5           v0.6/v0.7       v0.8
 (now)      (Jan 10)        (Jan 20)       (Feb 1)
    ‚îÇ              ‚îÇ              ‚îÇ              ‚îÇ
"stable      "Odoo         "events +       "beta
 alpha"    integration"   image-chain"    release"
```

### 3.2 v0.5: Odoo Integration (Jan 10 - Jan 20)

**Focus:** Connect Crearis-Vue to Crearis-Odoo as data backend

**Key Deliverables:**
- [ ] `workitems` table unified spec
- [ ] Odoo sync layer (MCP or GraphQL)
- [ ] `mail.activity` ‚Üî workitems sync
- [ ] `res.partner` ‚Üî users sync verification
- [ ] `website` ‚Üî projects sync verification
- [ ] Email system access (via Odoo)

**Odoo Models to Integrate:**
| Odoo Model | Vue Table | Sync Direction |
|------------|-----------|----------------|
| `res.partner` | `users` | bidirectional |
| `website` | `projects` | bidirectional |
| `domainuser` | `project_members` | bidirectional |
| `mail.activity` | `workitems` | bidirectional |
| `project.task` | `workitems` | bidirectional |

**MCP Role:**
- Schema discovery for all models
- Test data creation (opus1, opus2, hans.opus)
- Sync verification queries
- Debugging integration issues

### 3.3 v0.6: Events Workflow (Jan 20 - Jan 27)

**Focus:** Complete events implementation building on Odoo integration

**Key Deliverables:**
- [ ] Events CRUD via Odoo sync
- [ ] Recurring events solution (Odoo-led)
- [ ] Event participants (via `mail.activity`)
- [ ] Event status workflow (aligned with sysreg)
- [ ] Event email notifications (via Odoo)

**Deferred from v0.3/v0.4:**
- Recurring events implementation (complex, needs Odoo research)
- Deep event-participant relationships
- Payment integration

**v0.3/v0.4 Events Scope:**
- Basic events panel in project stepper
- Events list/edit in dashboard
- Simple CRUD, no Odoo sync yet

### 3.4 v0.7: Image Adapter Chain (Jan 20 - Jan 30)

**Focus:** Complete image workflow with adapters

**Key Deliverables:**
- [ ] Canva adapter (author multimedia)
- [ ] Cloudinary adapter (producer)
- [ ] Cloudflare CDN adapter (publisher)
- [ ] Full adapter chain execution
- [ ] Image consent workflow integration

**Already Working:**
- Cloudinary adapter (partial)
- Unsplash adapter (implemented)
- Adapter composite type on images table

### 3.5 v0.8: Beta Stabilization (Feb 1)

**Focus:** Production readiness

**Key Deliverables:**
- [ ] Bug fixes from v0.5-v0.7
- [ ] Performance optimization
- [ ] Security audit
- [ ] Documentation completion
- [ ] User acceptance testing

**Entry Criteria:**
- All sync flows tested end-to-end
- No critical bugs in core workflows
- Practitioner testing completed

---

## 4. workitems Table Specification

### 4.1 Four Sources Unified

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    WORKITEMS UNIFICATION                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                  ‚îÇ
‚îÇ  Source 1: Odoo Business Processes                               ‚îÇ
‚îÇ  ‚îú‚îÄ mail.activity (scheduled activities, reminders)              ‚îÇ
‚îÇ  ‚îú‚îÄ project.task (kanban tasks, project work)                    ‚îÇ
‚îÇ  ‚îî‚îÄ mail.message (discussions, linked to activities)             ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  Source 2: Comments (Migration 057)                              ‚îÇ
‚îÇ  ‚îú‚îÄ Post-IT style discussions                                    ‚îÇ
‚îÇ  ‚îú‚îÄ Threaded replies                                             ‚îÇ
‚îÇ  ‚îî‚îÄ Entity-attached (post, project, event, image)                ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  Source 3: Admin/Poweruser Scripts                               ‚îÇ
‚îÇ  ‚îú‚îÄ Data import/export tasks                                     ‚îÇ
‚îÇ  ‚îú‚îÄ Domain configuration                                         ‚îÇ
‚îÇ  ‚îî‚îÄ System administration                                        ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ  Source 4: Existing Kanban Tasks                                 ‚îÇ
‚îÇ  ‚îú‚îÄ Entity-aligned task cards                                    ‚îÇ
‚îÇ  ‚îú‚îÄ Status-value system integration                              ‚îÇ
‚îÇ  ‚îî‚îÄ Fullscreen kanban visualization                              ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îÇ                          ‚ñº                                       ‚îÇ
‚îÇ            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                           ‚îÇ
‚îÇ            ‚îÇ      workitems          ‚îÇ                           ‚îÇ
‚îÇ            ‚îÇ   (unified table)       ‚îÇ                           ‚îÇ
‚îÇ            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                           ‚îÇ
‚îÇ                                                                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 4.2 Table Schema (Draft)

```sql
CREATE TABLE workitems (
    -- Identity
    id SERIAL PRIMARY KEY,
    type VARCHAR(20) NOT NULL,  -- 'comment', 'todo', 'activity', 'process', 'script'
    
    -- Odoo sync
    odoo_xmlid VARCHAR(100),    -- e.g., "theaterpedia.mail_activity_123"
    odoo_model VARCHAR(50),     -- e.g., "mail.activity", "project.task"
    sync_status VARCHAR(20) DEFAULT 'local',  -- 'local', 'synced', 'pending', 'conflict'
    
    -- Entity attachment
    project_id INTEGER REFERENCES projects(id),
    entity_type VARCHAR(20),    -- 'post', 'project', 'event', 'image', NULL
    entity_id INTEGER,
    
    -- Threading (for comments)
    parent_id INTEGER REFERENCES workitems(id),
    
    -- Content
    author_id INTEGER REFERENCES users(id),
    summary VARCHAR(255),       -- short title/subject
    content TEXT,               -- full content (markdown)
    
    -- Status (aligned with sysreg)
    status INTEGER DEFAULT 1,   -- maps to status-value system
    priority INTEGER DEFAULT 0,
    
    -- Scheduling (for activities)
    due_date TIMESTAMP,
    activity_type VARCHAR(50),  -- 'email', 'call', 'meeting', 'todo', etc.
    
    -- Metadata
    is_pinned BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Type-specific views
CREATE VIEW comments AS 
    SELECT * FROM workitems WHERE type = 'comment';

CREATE VIEW todos AS 
    SELECT * FROM workitems WHERE type = 'todo';

CREATE VIEW activities AS 
    SELECT * FROM workitems WHERE type = 'activity';

-- Indexes
CREATE INDEX idx_workitems_type ON workitems(type);
CREATE INDEX idx_workitems_project ON workitems(project_id);
CREATE INDEX idx_workitems_entity ON workitems(entity_type, entity_id);
CREATE INDEX idx_workitems_odoo ON workitems(odoo_xmlid) WHERE odoo_xmlid IS NOT NULL;
CREATE INDEX idx_workitems_parent ON workitems(parent_id) WHERE parent_id IS NOT NULL;
```

### 4.3 Type Transformation

Comments can become todos (Option C from earlier discussion):

```sql
-- Comment becomes actionable todo
UPDATE workitems 
SET type = 'todo',
    summary = 'Action: ' || LEFT(content, 100),
    due_date = NOW() + INTERVAL '1 week'
WHERE id = 123 AND type = 'comment';
-- Same ID preserved, relations intact
```

---

## 5. Stub System Convention

### 5.1 Naming Convention

| Artifact | Pattern | Example |
|----------|---------|---------|
| Composable | `use*Stub.ts` | `useWorkitemsStub.ts` |
| Component | `*Stub.vue` | `WorkitemsPanelStub.vue` |
| Migration | `*_stub.ts` (not in index) | `058_workitems_stub.ts` |
| Test | `*.stub.spec.ts` | `workitems.stub.spec.ts` |

### 5.2 Alpha Prop Convention

```typescript
// useAlphaFlags.ts
export function useAlphaFlags(alpha?: string) {
  if (!alpha) return { enabled: false }
  
  // Parse: "dev_v0.5", "opt_v0.5", "v0.5_owner", "v0.6"
  const parts = alpha.split('_')
  const version = parts.find(p => p.startsWith('v'))?.slice(1) || '999'
  const mode = parts.find(p => ['dev', 'opt', 'owner'].includes(p)) || null
  
  const currentVersion = useRuntimeConfig().public.version // from package.json
  const versionOk = parseFloat(currentVersion) >= parseFloat(version)
  
  let enabled = versionOk
  
  if (mode === 'dev') {
    enabled = enabled && import.meta.dev
  } else if (mode === 'opt') {
    enabled = enabled && useUserPreferences().experimentalFeatures
  } else if (mode === 'owner') {
    enabled = enabled && useProjectActivation().isPOwner.value
  }
  
  return { enabled, version, mode }
}
```

Usage:
```vue
<template>
  <div v-if="alphaFlags.enabled">
    <!-- Experimental workitems panel -->
    <WorkitemsPanel />
  </div>
  <div v-else>
    <!-- Stub preview -->
    <div class="stub-preview">
      üöß Workitems panel coming in v0.5
    </div>
  </div>
</template>

<script setup>
const props = defineProps<{ alpha?: string }>()
const alphaFlags = useAlphaFlags(props.alpha)
</script>
```

---

## 6. Next Steps

### 6.1 Immediate (Today)

1. **Set up MCP for Odoo** (15-20 min)
   - Configure tuanle96/mcp-odoo in VS Code
   - Test connection to Crearis-Odoo
   - Query a few models to verify

2. **Continue v0.4 implementation**
   - Wire Friday's components
   - Events panel in project stepper
   - Keep scope limited (no Odoo sync yet)

### 6.2 This Week

1. **Create stub system**
   - `useAlphaFlags.ts` utility
   - Example stub components
   - Document convention

2. **Draft workitems migration** (stub, not executed)
   - Full schema with views
   - Odoo sync fields

3. **Events spec for v0.6**
   - Research recurring events in Odoo
   - Define "touch the edges" items for v0.4

### 6.3 Before Jan 10 (v0.5 start)

1. **GraphQL extension spec**
   - Which Odoo models to expose
   - nitro-graphql integration plan

2. **Test data structure**
   - opus1, opus2 project setup
   - hans.opus and test users
   - Sample activities/tasks

---

## 7. Progress Log

### 7.1 December 8, 2025 (Morning Session)

**Completed:**
- ‚úÖ MCP research: Evaluated tuanle96/mcp-odoo vs ivnvxd/mcp-server-odoo
- ‚úÖ Decided: Direct XML-RPC better than MCP for 3-week exploration
- ‚úÖ Created `scripts/odoo-query.py` - Direct Odoo access utility
- ‚úÖ Verified Odoo connection: 344 partners, 6 domainusers
- ‚úÖ Created `useAlphaFlags.ts` - Version-gated feature flags
- ‚úÖ Created `FeatureStub.vue` - Placeholder component for upcoming features
- ‚úÖ Created `058_workitems_stub.ts` - Draft migration (not in index)
- ‚úÖ Installed uv/uvx for future MCP use

**Key Discoveries from Odoo:**
| Model | Records | Insight |
|-------|---------|---------|
| `res.partner` | 344 | Real production data available |
| `crearis.domainuser` | 6 | Maps to project_members: domain_code, role, user_id |
| `mail.activity` | 0 | Ready for workitems sync |

**domainuser ‚Üí project_members mapping confirmed:**
```
domain_code ‚Üí project.domaincode
role (exec/team) ‚Üí configrole  
user_id[0] ‚Üí user_id
```

**Decision: XML-RPC over MCP**
Three-layer direct access is better for learning:
1. Plain Odoo spec (models, fields)
2. Python-level exploration  
3. Foundation for GraphQL integration

### 7.2 Open Questions for Events Exploration

- [ ] What event models exist in Crearis-Odoo?
- [ ] How does recurring events work?
- [ ] What's the event ‚Üí participant relationship?
- [ ] How do activities connect to events?

---

## 8. References

### 8.1 MCP Resources (Deferred)

- **tuanle96/mcp-odoo:** https://github.com/tuanle96/mcp-odoo (235 ‚≠ê)
- **ivnvxd/mcp-server-odoo:** https://github.com/ivnvxd/mcp-server-odoo
- **MCP for Odoo guide:** https://blog.pragtech.co.in/odoo-mcp-integration-chatgpt-claude-gemini/

### 8.2 GraphQL Resources

- **nitro-graphql:** https://github.com/productdevbook/nitro-graphql
- **nitro-graphql docs:** https://nitro-graphql.pages.dev/

### 8.3 Internal Documents

- `chat/spec/` - Next-version specs
- `chat/tasks/2025-12-01-SPRINT-Projectlogin_Workflow.md` - Current sprint
- `docs/devdocs/AUTH-SYSTEM-SPEC.md` - Capabilities system
- `scripts/odoo-query.py` - Direct Odoo XML-RPC utility

---

*Report prepared December 8, 2025, 08:15*  
*Updated December 8, 2025, 11:00 - Added progress log + Odoo discoveries*
