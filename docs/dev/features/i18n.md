# i18n System

The internationalization system provides translations throughout the application.

## Overview

### Architecture

```
sysreg tables → useI18n composable → Components
```

Translations are stored in the sysreg database and accessed via the `useI18n` composable.

## useI18n Composable

```typescript
import { useI18n } from '@/composables/useI18n'

const { t, button, label, message, setLanguage } = useI18n()
```

### Core Methods

| Method | Usage | Example |
|--------|-------|---------|
| `t(key)` | Generic translation | `t('welcome.message')` |
| `button(key)` | Button labels | `button('save')` |
| `label(key)` | Form labels | `label('name')` |
| `message(key)` | System messages | `message('success')` |
| `setLanguage(code)` | Change language | `setLanguage('de')` |

### Usage Examples

```vue
<template>
  <form>
    <label>{{ label('name') }}</label>
    <input v-model="name" />
    
    <label>{{ label('email') }}</label>
    <input v-model="email" />
    
    <button @click="save">{{ button('save') }}</button>
    <button @click="cancel">{{ button('cancel') }}</button>
  </form>
</template>

<script setup lang="ts">
import { useI18n } from '@/composables/useI18n'

const { button, label } = useI18n()
</script>
```

## Language Detection

Detection order:
1. User preference (stored in session)
2. Project language setting
3. Browser language (Accept-Language)
4. Default: German (`de`)

```typescript
// Check current language
const { currentLanguage } = useI18n()
console.log(currentLanguage.value) // 'de' or 'en'

// Change language
const { setLanguage } = useI18n()
await setLanguage('en')
```

## Translation Keys

### Button Keys

```typescript
button('save')      // Speichern / Save
button('cancel')    // Abbrechen / Cancel
button('delete')    // Löschen / Delete
button('edit')      // Bearbeiten / Edit
button('add')       // Hinzufügen / Add
button('next')      // Weiter / Next
button('prev')      // Zurück / Back
```

### Label Keys

```typescript
label('name')       // Name
label('email')      // E-Mail
label('password')   // Passwort / Password
label('title')      // Titel / Title
label('description')// Beschreibung / Description
```

### Message Keys

```typescript
message('success')        // Erfolgreich / Success
message('error')          // Fehler / Error
message('confirm_delete') // Wirklich löschen? / Really delete?
```

## Adding Translations

1. Add key to sysreg database
2. Provide translations for each language
3. Use via composable

### Database Structure

```sql
-- sysreg_i18n table
| key          | lang | value           |
|--------------|------|-----------------|
| button.save  | de   | Speichern       |
| button.save  | en   | Save            |
| label.name   | de   | Name            |
| label.name   | en   | Name            |
```

## Component Integration

Components use i18n for all user-facing text:

```vue
<script setup lang="ts">
import { useI18n } from '@/composables/useI18n'

const { button, label, setLanguage } = useI18n()

// Language detection on mount (admin → en, project → de)
const userLang = ref('de')

onMounted(() => {
  setLanguage(userLang.value)
})
</script>
```

---

*See also: [Admin i18n](/admin/i18n) for management interface*
