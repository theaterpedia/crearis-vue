# =============================================================================
# Crearis Vue - Deployment Configuration
# =============================================================================
# Copy this file to .env.deploy and fill in your values
# Location: scripts/.env.deploy
# =============================================================================

# =============================================================================
# GitHub Repository
# =============================================================================
GITHUB_REPO=https://github.com/theaterpedia/crearis-vue.git
DEPLOY_BRANCH=main
# DEPLOY_TAG=v1.0.0  # Optional: deploy specific tag instead of branch

# =============================================================================
# System User (runs PM2 and application)
# =============================================================================
DEPLOY_USER=pruvious

# =============================================================================
# PostgreSQL Database User
# =============================================================================
# The PostgreSQL user that owns the database (created during Phase 1 prerequisites)
# Note: This is the PostgreSQL database user, not the Linux system user
PG_USER=crearis_admin

# =============================================================================
# Directory Structure
# =============================================================================
# Base directory for all Crearis files
BASE_DIR=/opt/crearis

# Source code directory (git repository)
SOURCE_DIR=$BASE_DIR/source

# Live application directory (built .output)
LIVE_DIR=$BASE_DIR/live

# Data files directory (CSV, uploads, etc.)
DATA_DIR=$BASE_DIR/data

# Log files directory
LOG_DIR=$BASE_DIR/logs

# Backup directory
BACKUP_DIR=$BASE_DIR/backups

# Scripts directory
SCRIPTS_DIR=$BASE_DIR/scripts

# =============================================================================
# Application Configuration
# =============================================================================
# Environment mode (CRITICAL for database safety)
# - production: Blocks dangerous database operations (pnpm db:rebuild, drop scripts)
# - development: Allows database rebuild/drop (for local development only)
NODE_ENV=production

# Port the Node.js application listens on (internal)
APP_PORT=3000

# Skip migrations on production (database schema already set up)
# Set to false only when running new migrations, then set back to true
SKIP_MIGRATIONS=true

# =============================================================================
# Domain Configuration (for Phase 3)
# =============================================================================
# Primary domain (used for SSL certificate name)
PRIMARY_DOMAIN=theaterpedia.org

# Additional domains (space-separated)
ADDITIONAL_DOMAINS=www.theaterpedia.org

# Email for Let's Encrypt SSL certificates
SSL_EMAIL=admin@theaterpedia.org

# =============================================================================
# Example Usage:
# =============================================================================
# Phase 1 (as root): Clone repository and create structure
#   sudo bash scripts/server_deploy_phase1_clone.sh
#
# Phase 2 (as pruvious): Build application and setup database
#   Note: PostgreSQL user 'crearis_admin' must exist before Phase 2
#   sudo -u pruvious bash scripts/server_deploy_phase2_build.sh
#
# Phase 3 (as root): Configure domains and SSL
#   sudo bash scripts/server_deploy_phase3_domain.sh
# =============================================================================
